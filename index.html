
<html><head>
  <link rel="preload" href="bg.webm" as="video" type="video/webm">

  <meta charset="UTF-8">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Axelify yourself!</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik+Bubbles&display=swap" rel="stylesheet">
  <style>
/* Custom scrollbar styles */
::-webkit-scrollbar {
  width: 12px; /* Width of the scrollbar */
}

::-webkit-scrollbar-track {
  background: #f8e3f8; /* Background of the scrollbar track */
}

::-webkit-scrollbar-thumb {
  background-color: #ec90ff; /* Scrollbar thumb color */
  border-radius: 10px; /* Roundness of the scrollbar thumb */
  border: 2px solid #afedef; /* Border around the scrollbar thumb */
}

::-webkit-scrollbar-thumb:hover {
  background-color: #cf7ae0; /* Scrollbar thumb color when hovered */
}

* {
  scrollbar-width: thin;
  scrollbar-color: #ec90ff #f8e3f8;
}


footer {
  text-align: center;
padding-top: 20px;


}

footer a img {
  max-width: 40px;
 padding-left: 15px;
 padding-right: 15px;
  height: auto;
  cursor: pointer;
  transition: transform 0.2s;

}

footer a img:hover {
  transform: scale(1.1);
}
  
  #background-video {
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              object-fit: cover;
              z-index: -2;
          }
          .blur-overlay {
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              backdrop-filter: blur(15px) grayscale(60%);
              z-index: -1;
          }
  
          .logo {
    display: block;
    margin: 0 auto 0px auto;
    max-width: 300px;
    height: auto;
    cursor: pointer;
  }
  
          
    :root {
      --primary-color: #ec90ff;
      --secondary-color: #afedef;
      --background-color: #f8e3f8;
      --text-color: #ec90ff;
    }
  
    body {
      font-family: 'Rubik Bubbles', cursive;
      margin: 0;
      padding: 20px;
      background-color: var(--background-color);
      color: var(--text-color);
    }
  
    .container {
      max-width: 800px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  
    }
  p {
    text-align: center; 
    font-size: 25px;
    color: #e992fb;
  }
  
    h1 {
      font-size: 40px;
    }
    h2 {
      font-size: 30px;
    }
    h1, h2 {
  
      text-align: center;
      color: var(--secondary-color);
      -webkit-text-stroke: .1px black;
      text-stroke: .1px rgb(66, 66, 66);
      font-family: 'Rubik Bubbles', cursive;
    }
  
  
  
    .step {
      display: none;
    }
  
    .step.active {
      display: block;
    }
  
    .overlay-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
  
    .overlay-item-container {
    padding-top: 20px;
      position: relative;
      cursor: pointer;
      border: 1px solid #aecdd3;
      border-radius: 10px;
      transition: transform 0.2s, box-shadow 0.2s;
      background: linear-gradient(69deg, rgba(249,226,250,1) 0%, rgba(173,237,237,1) 68%, rgba(249,226,250,1) 100%);
      overflow: hidden;
      
    }
  
    .overlay-item-container:hover, .overlay-item-container.selected {
      transform: scale(1.05);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
  
    .overlay-item-container.selected {
      border-color: var(--secondary-color);
    }
  
    .overlay-item {
      width: 100%;
      height: auto;
      display: block;
    }
  
    .overlay-text {
      text-shadow: #000000 1px 1px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      text-align: center;
      padding: 10px;
      font-size: 20px;
      height: 25%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  
    #canvas-container {
      position: relative;
      width: 100%;
      max-width: 500px;
      margin: 0 auto 20px;
      box-sizing: border-box; /* Include padding and border in width */
  }
  
  canvas {
      width: 100%; /* Allow the canvas to scale with the container */
      height: auto; /* Maintain aspect ratio */
      border: 1px solid var(--primary-color);
      border-radius: 10px;
      box-sizing: border-box; /* Include padding and border in width */
  }
  
  @media (max-width: 600px) {
      #canvas-container {
          max-width: 100%; /* Adjust max-width for smaller screens */
      }
  }
  
    .button-container {
      padding-top: 5px;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 20px;
    }
  
    .button {
      display: inline-block;
      padding: 12px 24px;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s, transform 0.2s;
      text-align: center;
      text-decoration: none;
      font-family: 'Rubik Bubbles', cursive;
      text-shadow: #000000 1px 1px;
    }
  
    .button:hover {
      background-color: #cf7ae0;
      transform: translateY(-2px);
    }
  
    #reset-button {
      background-color: #FF8A80;
      text-shadow: #000000 1px 1px;
    }
  
    #reset-button:hover {
      background-color: #FF5252;
      
    }
  
    #photo-upload {
      display: none;
    }
  
    .upload-label {
    display: block;
    padding: 12px 24px;
    background-color: var(--primary-color);
    color: rgb(255, 255, 255);
    border-radius: 25px;
    cursor: pointer;
    font-size: 16px;
    margin: 10px auto;
    transition: background-color 0.3s, transform 0.2s;
    text-align: center;
    text-shadow: #000000 1px 1px;
    max-width: 100%; /* Ensure the button doesn’t overflow */
    width: 100%; /* Allow the button to scale down */
    box-sizing: border-box; /* Include padding/border in width */
  }
  
  @media (max-width: 600px) {
    .button, .upload-label {
      width: 100%; /* Ensure the button adjusts to small screens */
      margin: 10px 0;
    }
  }
  
    .upload-label:hover {
      background-color: #cf7ae0;
      transform: translateY(-2px);
    }
  
    @media (max-width: 600px) {
      .container {
        padding: 10px;
      }
  
      .overlay-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      }
  
      .button, .upload-label {
        width: 100%;
        margin: 10px 0;
      }
    }
  
    .drop-message {
    text-align: center;
    margin-top: 10px;
    color: #555;
  }
  
  /* Highlight the drop zone on drag over */
  #step2.drag-over {
    border: 2px dashed var(--primary-color);
  }
  </style>
  </head>
  <body>
    <style>
      /* Loading overlay */
      #loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 1;
  transition: opacity 600ms ease-out, visibility 0s linear 700ms;
}

body.loaded #loading-overlay {
  opacity: 0; /* Fades out smoothly */
  visibility: hidden; /* Hides after the opacity transition completes */
  transition: opacity 700ms ease-out, visibility 0s linear 700ms;
}
#background-video {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: -2;
}
/* Video for background in loader */
#loader-background-video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: -1; /* Stay behind the loader */
 filter: blur(15px) grayscale(60%);
}
      



      /* Add your other styles here */

      .lds-roller {
  /* change color here */
  color: rgb(213, 22, 252, 0.5);

  
  
}
.lds-roller,
.lds-roller div,
.lds-roller div:after {
  box-sizing: border-box;
}
.lds-roller {
  display: inline-block;
  position: relative;
  width: 80px;
  height: 80px;
}
.lds-roller div {
  animation: lds-roller 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  transform-origin: 40px 40px;
}
.lds-roller div:after {
  content: " ";
  display: block;
  position: absolute;
  width: 7.2px;
  height: 7.2px;
  border-radius: 50%;
  background: currentColor;
  margin: -3.6px 0 0 -3.6px;
}
.lds-roller div:nth-child(1) {
  animation-delay: -0.036s;
}
.lds-roller div:nth-child(1):after {
  top: 62.62742px;
  left: 62.62742px;
}
.lds-roller div:nth-child(2) {
  animation-delay: -0.072s;
}
.lds-roller div:nth-child(2):after {
  top: 67.71281px;
  left: 56px;
}
.lds-roller div:nth-child(3) {
  animation-delay: -0.108s;
}
.lds-roller div:nth-child(3):after {
  top: 70.90963px;
  left: 48.28221px;
}
.lds-roller div:nth-child(4) {
  animation-delay: -0.144s;
}
.lds-roller div:nth-child(4):after {
  top: 72px;
  left: 40px;
}
.lds-roller div:nth-child(5) {
  animation-delay: -0.18s;
}
.lds-roller div:nth-child(5):after {
  top: 70.90963px;
  left: 31.71779px;
}
.lds-roller div:nth-child(6) {
  animation-delay: -0.216s;
}
.lds-roller div:nth-child(6):after {
  top: 67.71281px;
  left: 24px;
}
.lds-roller div:nth-child(7) {
  animation-delay: -0.252s;
}
.lds-roller div:nth-child(7):after {
  top: 62.62742px;
  left: 17.37258px;
}
.lds-roller div:nth-child(8) {
  animation-delay: -0.288s;
}
.lds-roller div:nth-child(8):after {
  top: 56px;
  left: 12.28719px;
}
@keyframes lds-roller {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
    </style>
    

    <div class="blur-overlay"></div>
    <video id="background-video" autoplay muted loop>
        <source src="bg.webm" type="video/webm">
        Your browser does not support the video tag.
    </video>
  
    <img src="logo.avif" alt="Logo" class="logo" onclick="resetApp()">
    <div class="container">
      <h1>Axelify yourself!</h1>
      
      <div id="step1" class="step active">
        <h2>Choose your Collection</h2>
        <div class="overlay-grid" id="overlay-grid"></div>
      </div>
      
      <div id="step2" class="step">
        <h2>Upload Your Profile Picture</h2>
        <label for="photo-upload" class="upload-label">Select Photo</label>
        <p >or paste/drag a photo.</p>
        <input type="file" id="photo-upload" accept="image/*">
      </div>
      
      <div id="step3" class="step">
        <h2>Adjust Overlay</h2>
        <p>Please drag and resize if the overlay doesn’t match perfectly</p>
        <div id="canvas-container">
          <canvas id="main-canvas"></canvas>
        </div>
        <div class="button-container">
          <button id="download-button" class="button">Download</button>
          <button id="reset-button" class="button">Reset</button>
        </div>
      </div>
    </div>
<footer>
      <a href="https://x.com/AxelToInfinity" target="_blank">
        <img src="x2.avif" alt="X logos">
      </a>
      <a href="https://magiceden.us/runes/AXEL%E2%80%A2TO%E2%80%A2INFINITY" target="_blank">
        <img src="me.avif" alt="MagicEden logo">
      </a>
    </footer>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    <script>
  const overlays = [
    { name: 'OMB', src: 'omb.avif', collection: 'OMB' },
    { name: 'Pizza Ninjas', src: 'ninja.avif', collection: 'Pizza Ninjas' },
    { name: 'BTC Puppet', src: 'pup.avif', collection: 'BTC Puppet' },
    { name: 'Bitcoin Frog', src: 'frog.avif', collection: 'Bitcoin Frog' },
    { name: 'Based Angels', src: 'ba.avif', collection: 'Based Angels' },
  ];
  
  const step1 = document.getElementById('step1');
  const step2 = document.getElementById('step2');
  const step3 = document.getElementById('step3');
  const overlayGrid = document.getElementById('overlay-grid');
  const photoUpload = document.getElementById('photo-upload');
  const mainCanvas = document.getElementById('main-canvas');
  const downloadButton = document.getElementById('download-button');
  const resetButton = document.getElementById('reset-button');
  
  let canvas;
  let selectedOverlay;
  let userImage;
  let overlayObject;
  
  function initializeCanvas() {
    // Dispose of existing canvas if it exists
    if (canvas) {
      canvas.dispose();
    }
  
    const container = document.getElementById('canvas-container');
    const containerWidth = container.clientWidth;
  
    canvas = new fabric.Canvas('main-canvas', {
      width: containerWidth,
      height: containerWidth
    });
  }
  
  function populateOverlays() {
    overlays.forEach(overlay => {
      const container = document.createElement('div');
      container.classList.add('overlay-item-container');
  
      const item = document.createElement('img');
      item.src = overlay.src;
      item.alt = overlay.name;
      item.classList.add('overlay-item');
  
      const text = document.createElement('div');
      text.classList.add('overlay-text');
      text.textContent = overlay.collection;
  
      container.appendChild(item);
      container.appendChild(text);
      container.addEventListener('click', (event) => selectOverlay(overlay, container));
      overlayGrid.appendChild(container);
    });
  }
  
  function selectOverlay(overlay, container) {
    selectedOverlay = overlay;
    document.querySelectorAll('.overlay-item-container').forEach(item => item.classList.remove('selected'));
    container.classList.add('selected');
    step1.classList.remove('active');
    step2.classList.add('active');
  }
  
  function handleFiles(files) {
    const file = files[0];
    if (file && file.type.startsWith('image/')) {
      const reader = new FileReader();
  
      reader.onload = function(e) {
        userImage = e.target.result;
  
        // Activate step3 before initializing the canvas
        step2.classList.remove('active');
        step3.classList.add('active');
        initializeCanvas();
  
        fabric.Image.fromURL(userImage, img => {
          img.scaleToWidth(canvas.width);
          canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));
          addOverlayToCanvas();
        }, { crossOrigin: 'anonymous' });
      };
  
      reader.readAsDataURL(file);
    } else {
      alert('Please upload an image file.');
    }
  }
  
  // Event listener for the file input
  photoUpload.addEventListener('change', (event) => {
    handleFiles(event.target.files);
  });
  
  // Drag and Drop functionality
  const dropZone = document.getElementById('step2');
  
  // Prevent default behaviors
  ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
    dropZone.addEventListener(eventName, preventDefaults, false);
  });
  
  function preventDefaults(e) {
    e.preventDefault();
    e.stopPropagation();
  }
  
  // Highlight drop zone
  ['dragenter', 'dragover'].forEach(eventName => {
    dropZone.addEventListener(eventName, highlightDropZone, false);
  });
  
  ['dragleave', 'drop'].forEach(eventName => {
    dropZone.addEventListener(eventName, unhighlightDropZone, false);
  });
  
  function highlightDropZone(e) {
    dropZone.classList.add('drag-over');
  }
  
  function unhighlightDropZone(e) {
    dropZone.classList.remove('drag-over');
  }
  
  dropZone.addEventListener('drop', handleDrop, false);
  
  function handleDrop(e) {
    const dt = e.dataTransfer;
    const files = dt.files;
  
    if (files && files.length > 0) {
      handleFiles(files);
    }
  }
  
  // Paste functionality
  document.addEventListener('paste', handlePaste);
  
  function handlePaste(e) {
    // Only handle paste if step2 is active
    if (!step2.classList.contains('active')) {
      return;
    }
  
    const clipboardData = e.clipboardData || window.clipboardData;
    const items = clipboardData.items;
  
    for (let i = 0; i < items.length; i++) {
      if (items[i].type.indexOf('image') !== -1) {
        const file = items[i].getAsFile();
        handleFiles([file]);
        break; // Stop after handling the first image item
      }
    }
  }
  
  function addOverlayToCanvas() {
    if (selectedOverlay) {
      fabric.Image.fromURL(selectedOverlay.src, img => {
        img.scaleToWidth(canvas.width);
        img.set({
          left: canvas.width / 2,
          top: canvas.height / 2,
          originX: 'center',
          originY: 'center'
        });
        overlayObject = img;
        canvas.add(overlayObject);
        canvas.setActiveObject(overlayObject);
        canvas.renderAll();
      }, { crossOrigin: 'anonymous' });
    }
  }
  
  function downloadImage() {
    const dataURL = canvas.toDataURL({
      format: 'png',
      quality: 1
    });
    const link = document.createElement('a');
    link.download = 'profile-picture.png';
    link.href = dataURL;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }
  
  function resetApp() {
      step3.classList.remove('active');
      step2.classList.remove('active'); // Added this line
      step1.classList.add('active');
      selectedOverlay = null;
      userImage = null;
  
      // Dispose of the existing canvas
      if (canvas) {
        canvas.dispose();
        canvas = null;
      }
  
      document.querySelectorAll('.overlay-item-container').forEach(item => item.classList.remove('selected'));
      photoUpload.value = '';
    }
  
    // Initialize the app
    window.onload = function() {
      populateOverlays();
      downloadButton.addEventListener('click', downloadImage);
      resetButton.addEventListener('click', resetApp);
  
      // Update the logo to trigger resetApp
      const logo = document.getElementById('logo');
      logo.addEventListener('click', resetApp);
      logo.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          resetApp();
        }
      });
    };
  
  
  // Adjust canvas size on window resize
  window.addEventListener('resize', function() {
    if (canvas) {
      const container = document.getElementById('canvas-container');
      const containerWidth = container.clientWidth;
      canvas.setWidth(containerWidth);
      canvas.setHeight(containerWidth);
      canvas.renderAll();
    }
  });
  
    </script>
  </body>
  </html>
